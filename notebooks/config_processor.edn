{:path [], :nextjournal/value {:package :directory, :toc {:path [], :nextjournal/value [{:title "", :emoji nil, :path "#", :items [{:title "", :emoji nil, :path "#", :items [{:title "Resource Config", :emoji nil, :path "#resource-config", :items []}]}]} {:title "", :emoji nil, :path "#", :items [{:title "", :emoji nil, :path "#", :items [{:title "Functions", :emoji nil, :path "#functions", :items []}]}]} {:title "", :emoji nil, :path "#-2", :items [{:title "", :emoji nil, :path "#", :items [{:title "Testing", :emoji nil, :path "#testing", :items []}]}]}], :nextjournal/render-opts {:toc-visibility false, :set-hash? true}, :nextjournal/viewer {:name nextjournal.clerk.viewer/toc-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render.navbar/render-items], :hash "5dtesrAmYqLZQQHSMEfFTNpmLtY4nC"}}, :sidenotes? false, :toc-visibility false, :atom-var-name->state {}, :ns #clerk/render-fn+opts [{:eval true} (ns config-processor)], :file "notebooks/config_processor.cljc", :scope config-processor, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil [:<> [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href "./../../"} "Index"] [:span.mx-2 "â€¢"]] [:span "Generated with " [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href "https://clerk.vision"} "Clerk"] [:<> " from " [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href "https://github.com/GigiaJ/pulumi-clojurescript/blob/933968ca805792e6a6af1493fa9660bca577b9f9/notebooks/config_processor.cljc"} "notebooks/config_processor.cljc" [:<> "@" [:span.tabular-nums "933968c"]]]]]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}, :open-graph {:type "article:clerk", :title "Resource Config", :description "Our first steps are then to start pulling apart the old parsing mechanism and build out a testing template to run against it. We don't need Pulumi yet if we do it in this manner. For this example we'll use Harbor since it feels diverse enough to point to."}, :title "Resource Config", :blocks [{:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5drAc29cDFn8B3XHMTRPvXxNEFqCdy"} [:p [:<> "Our first steps are then to start pulling apart the old parsing mechanism and build out a testing template to run against it."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "We don't need Pulumi yet if we do it in this manner."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "For this example we'll use Harbor since it feels diverse enough to point to."]] [:p [:<> "As we wish to modernize the form to handle any need for a Pulumi resource definition, we must first start with"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "actually defining said resource config definition."]] ["h3" {:id "resource-config"} [:<> "Resource Config"]] [:p [:<> "This will be the resource config definition we use to test and aid in visualization:"]]], :nextjournal/render-opts {:id "config-processor/markdown-5drAc29cDFn8B3XHMTRPvXxNEFqCdy"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(def test-config\n  {:stack [{:vault:retrieve {:app-name 'app-name\n                             :app-namespace 'app-name}\n            :pulumi-options {}}\n           [:harbor\n            {:project {}\n             :pulumi-options {}}\n            {:robot-account {:name '(str \"kube-\" app-name \"-robot\")\n                             :namespace 'app-name\n                             :level \"project\"\n                             :permissions [{:kind \"project\"\n                                            :namespace 'app-name\n                                            :access [{:action \"pull\" :resource \"repository\"}\n                                                     {:action \"list\" :resource \"repository\"}]}]}\n             :pulumi-options {}}]\n           {:k8s:secret {:metadata\n                         {:name \"harbor-creds-secrets\"\n                          :namespace \"kube-system\"\n                          :annotations {\"replicator.v1.mittwald.de/replicate-to\" \"*\"}}\n                         :type \"kubernetes.io/dockerconfigjson\"\n                         :stringData {\".dockerconfigjson\" '(str \"{\\\"auths\\\":{\\\"\"\n                                                                host\n                                                                \"\\\":{\\\"auth\\\":\\\"\"\n                                                                (b64e (str (-> :harbor:robot-account .-fullName) \":\" (-> :harbor:robot-account .-secret)))\n                                                                \"\\\"}}}\")}}\n            :pulumi-options {}}]})", :nextjournal/render-opts {:loc {:line 22, :end-line 48, :column 1, :end-column 35}, :id "config-processor/test-config-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5du41uVcSYVU9pFc4WtB16hEUmkmc7"} ["h1" {:id ""}] ["h3" {:id "functions"} [:<> "Functions"]] ["h1" {:id "-2"}] [:p [:<> "Now we should define the functions that we'll actually use to parse this template and perform the processing on it."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "I found a neat feature in Clerk combined with Clojure's REPL ns source-fn allows us to leave the source code neatly in the"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "expected location, but both use and document it here."]] [:p [:<> "So this is a monadic lift. A fancy way of saying this method is to operate on wrapped Pulumi output values without the function itself knowing"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "anything about Pulumi. So we can use this to handle this with Clojure or Clojurescript."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "In short it is what unwraps and allows operating on Pulumi outputs."]]], :nextjournal/render-opts {:id "config-processor/markdown-5du41uVcSYVU9pFc4WtB16hEUmkmc7"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value {:nextjournal/presented {:path [0], :nextjournal/value "(defn lift [f args]\n  (if (some pulumi/output? args)\n    (pulumi/apply-output (pulumi/all args)\n                         #(apply f %))\n    (apply f args)))", :nextjournal/render-opts {:language "clojure", :id "config-processor/anon-expr-5drjx54vFJLbEQ3RdrnHA23uS93Wza-result"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code], :hash "5dsJQw12yyyd7TcZEf52VSHxnqnJUC"}}, :nextjournal/blob-id "5du6nTAUJw3Hm4gRktG89u81eE2G61"}, :nextjournal/render-opts {:language "clojure", :id "config-processor/anon-expr-5drjx54vFJLbEQ3RdrnHA23uS93Wza-result"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5dtaeWp3CFDpgZxNbo4vBpzeM7TfTL"} [:p [:<> "This is a monadic bind. This allows values to be moved through. It checks the value to determine if we need to unwrap it."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "If it is plain we execute on it immediately, and if it isn't we pass it on and defer the execution."]]], :nextjournal/render-opts {:id "config-processor/markdown-5dtaeWp3CFDpgZxNbo4vBpzeM7TfTL"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value {:nextjournal/presented {:path [0], :nextjournal/value "(defn chain [val f]\n  (if (pulumi/output? val)\n    (pulumi/apply-output val f)\n    (f val)))", :nextjournal/render-opts {:language "clojure", :id "config-processor/anon-expr-5du2Sup5Dpz3dR2E8hqipDqzxszUxc-result"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code], :hash "5dsJQw12yyyd7TcZEf52VSHxnqnJUC"}}, :nextjournal/blob-id "5dqxMfZNqtEFeWmHKSetZsLkMZGvP4"}, :nextjournal/render-opts {:language "clojure", :id "config-processor/anon-expr-5du2Sup5Dpz3dR2E8hqipDqzxszUxc-result"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5drRGShMgbfxFMoWtvpU8cARCVEWps"} [:p [:<> "Now we want to have a \"virtual\" threading operator. It is to provide a clean interpreter to the config"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "That is to say it should feel fluid to use. Idiomatic to the Clojure experience and interacting with Pulumi outputs"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "So as an example we might want the config to have: (-> :harbor:robot-account .-fullName)"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "So firstly :harbor:robot-account would represent a Pulumi Output object. So we can't treat it as a normal object."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "Without this our configs have no way of easily stepping through the JS object itself and interact with prior step"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "results. This interaction is consistent everywhere possible, so even on exports of the data to Pulumi to store into"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "the state file we can easily interact and retrieve."]]], :nextjournal/render-opts {:id "config-processor/markdown-5drRGShMgbfxFMoWtvpU8cARCVEWps"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value {:nextjournal/presented {:path [0], :nextjournal/value "(defn do-threading [val steps]\n  (reduce (fn [acc step]\n            (let [run-step (fn [v]\n                             (cond\n                               ;; Property Access (.-prop)\n                               (and (symbol? step) (str/starts-with? (name step) \".-\"))\n                               (let [prop (subs (name step) 2)]\n                                 #?(:cljs (aget v prop)\n                                    :clj  (get v (keyword prop))))\n\n                               ;; Map Lookup (get key default)\n                               (and (list? step) (= (first step) 'get))\n                               (get v (second step) (nth step 2 nil))\n\n                               ;; Function Call: (my-fn arg) -> (my-fn v arg)\n                               (and (list? step) (contains? safe-fns (first step)))\n                               (apply (get safe-fns (first step)) v (rest step))\n\n                               ;; Bare Function: my-fn -> (my-fn v)\n                               (and (symbol? step) (contains? safe-fns step))\n                               ((get safe-fns step) v)\n\n                               :else v))]\n              (chain acc run-step)))\n          val steps))", :nextjournal/render-opts {:language "clojure", :id "config-processor/anon-expr-5duCRFDEfmTmgH2rzcb12F8SeFhN7B-result"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code], :hash "5dsJQw12yyyd7TcZEf52VSHxnqnJUC"}}, :nextjournal/blob-id "5dtEkiF9wBtE16QmsxsG43HNERUMg9"}, :nextjournal/render-opts {:language "clojure", :id "config-processor/anon-expr-5duCRFDEfmTmgH2rzcb12F8SeFhN7B-result"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5duAmKvLQpti8r5jUYjtGAjN5AzdL3"} [:p [:<> "This is effectively the config interpreter. It takes a config definition and context"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "and evaluates them. The context is typically "] [:em [:<> "everything"]] [:<> " including whatever"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "secret provider you use and a retrieval (or setter) step. This way you can"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "use evaluated secrets stored in Vault for example."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "The postwalk works from the bottom up. So if you have {:stack [:vault:retrieve {:app-name 'app-name}]}"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "Then app-name is resolved "] [:em [:<> "first"]] [:<> " and it works its way up to vault:retrieve."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "The conditions determine whether we need to use our virtual threading mecro, our function callers (in the safe-fns)"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "or our symbol lookup for resolving plain values at the top-level of the config."]]], :nextjournal/render-opts {:id "config-processor/markdown-5duAmKvLQpti8r5jUYjtGAjN5AzdL3"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value {:nextjournal/presented {:path [0], :nextjournal/value "(defn resolve-template [template values]\n  (walk/postwalk\n   (fn [x]\n     (cond\n       (and (list? x) (= (first x) '->))\n       (let [[_ start-val & steps] x\n             resource (cond\n                        ;; Magic Lookup: (:key) -> fetch from values + COERCE\n                        (keyword? start-val)\n                        (coerce-value (get values start-val))\n\n                        ;; Symbol: Already resolved by postwalk, just use it\n                        ;; postwalk visits children first, so the symbol branch below \n                        ;;  already ran and coerced this if it was a symbol lookup\n                        :else start-val)]\n         (do-threading resource steps))\n\n       ;; Standard Handlers\n       (and (list? x) (contains? safe-fns (first x)))\n       (let [f    (get safe-fns (first x))\n             args (rest x)]\n         (lift f (doall args)))\n\n       ;; Symbol Lookup (With Coercion)\n       (symbol? x)\n       (let [k (keyword x)]\n         (cond\n           ;; Try Keyword Match (:app-name)\n           (contains? values k) (coerce-value (get values k))\n\n           ;; Try Symbol Match ('app-name)\n           (contains? values x) (coerce-value (get values x))\n\n           ;; Fallback: It's just a symbol (maybe a function name or local var)\n           :else x))\n\n       :else x))\n   template))", :nextjournal/render-opts {:language "clojure", :id "config-processor/anon-expr-5dquzGLu51fnWegGMSKoNc9fUrVX5v-result"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code], :hash "5dsJQw12yyyd7TcZEf52VSHxnqnJUC"}}, :nextjournal/blob-id "5du1XmRiBCgFMT3a98TcjEwfZwQNBs"}, :nextjournal/render-opts {:language "clojure", :id "config-processor/anon-expr-5dquzGLu51fnWegGMSKoNc9fUrVX5v-result"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5dtw5dW7EEz5LMAfiBVcMDj4kk2dQd"} [:p [:<> "It might be helpful to include some visualization aids in the form of diagrams in the execution flow for processing"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "a config."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "This helps illustrate how the postwalk visits each node in our config."]]], :nextjournal/render-opts {:id "config-processor/markdown-5dtw5dW7EEz5LMAfiBVcMDj4kk2dQd"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value {:nextjournal/presented {:path [0], :nextjournal/value "graph BT\n    %% The Leaves (Step 1)\n    L1(\"Leaf: 'app-name\") -->|Resolves to value| P1\n    L2(\"Leaf: :harbor:robot-account\") -->|Evaluated| T1\n    L3(\"Leaf: .-fullName\") -->|Evaluated| T1\n    \n    %% The Inner Expressions (Step 2)\n    subgraph Step 2: Deepest Expressions\n      T1(\"Expr: -> ... .-fullName\") -->|Result: 'robot-main'| B64\n      T2(\"Expr: -> ... .-secret\") -->|Result: 'xyz123'| B64\n    end\n\n    %% The Middle Layers (Step 3)\n    subgraph Step 3: Intermediate Functions\n      B64(\"Expr: b64e ...\") -->|Result: 'Og=='| STR\n      P1(\"Expr: str 'kube-' ...\") -->|Result: 'kube-harbor-robot'| ROBOT_MAP\n    end\n\n    %% The Outer Layers (Step 4)\n    subgraph Step 4: Outer Expressions\n      STR(\"Expr: str 'auths' ... \") -->|Result: JSON String| FINAL_MAP\n    end\n\n    %% The Containers (Step 5)\n    subgraph Step 5: Container Reconstruction\n      ROBOT_MAP{:robot-account ...} --> FINAL_STACK\n      FINAL_MAP{:stringData ...} --> FINAL_STACK\n    end\n\n    FINAL_STACK[Final Vector] --> ROOT[Resulting Map]\n\n    classDef leaf fill:#e1f5fe,stroke:#01579b\n    classDef expr fill:#fff9c4,stroke:#fbc02d\n    classDef container fill:#e8f5e9,stroke:#2e7d32\n    \n    class L1,L2,L3 leaf\n    class T1,T2,B64,P1,STR expr\n    class ROBOT_MAP,FINAL_MAP,FINAL_STACK container", :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [value] (when value [nextjournal.clerk.render/with-d3-require {:package ["mermaid@8.14/dist/mermaid.js"]} (fn [mermaid] [:div {:ref (fn [el] (when el (.initialize mermaid (clj->js {:startOnLoad false})) (.render mermaid (str "id" (js/Math.floor (js/Math.random 1000))) value (fn* [p1__16428#] (set! (.-innerHTML el) p1__16428#)))))}])]))], :hash "5dsJck7E9BrHwc95u46xUpJ2vjFgrq"}, :nextjournal/render-opts {:id "config-processor/anon-expr-5dtaJPjJoMuZQMDZaFD4SCNZEhJVvY-result"}}, :nextjournal/blob-id "5du4z6qcxhCpakQH7YSJSmvWYkvLte"}, :nextjournal/render-opts {:id "config-processor/anon-expr-5dtaJPjJoMuZQMDZaFD4SCNZEhJVvY-result"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5drD7JDweMaHv9xLHEou7E6LudF3R9"} [:p [:<> "With this we can note that auto-substitution of variables with their values is occurring."]]], :nextjournal/render-opts {:id "config-processor/markdown-5drD7JDweMaHv9xLHEou7E6LudF3R9"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(proc/resolve-template test-config {:app-name \"harbor\"})", :nextjournal/render-opts {:loc {:line 134, :end-line 134, :column 1, :end-column 57}, :id "config-processor/anon-expr-5dqwp6CwNWUW4wm9kPFddjtStSbwL2-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value [{:path [1 0 0], :nextjournal/value :stack, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1], :nextjournal/value [{:path [1 0 1 0], :nextjournal/value [{:path [1 0 1 0 0], :nextjournal/value [{:path [1 0 1 0 0 0], :nextjournal/value :pulumi-options, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 0 0 1], :nextjournal/value [], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :closing-paren ("}"), :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 0 1], :nextjournal/value [{:path [1 0 1 0 1 0], :nextjournal/value :vault:retrieve, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 0 1 1], :nextjournal/value [{:path [1 0 1 0 1 1 0], :nextjournal/value [{:path [1 0 1 0 1 1 0 0], :nextjournal/value :app-name, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 0 1 1 0 1], :nextjournal/value "harbor", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 0 1 1 1], :nextjournal/value [{:path [1 0 1 0 1 1 1 0], :nextjournal/value :app-namespace, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 0 1 1 1 1], :nextjournal/value "harbor", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}} {:path [1 0 1 1], :nextjournal/value [{:path [1 0 1 1 0], :nextjournal/value :harbor, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 1], :nextjournal/value [{:path [1 0 1 1 1 0], :nextjournal/value [{:path [1 0 1 1 1 0 0], :nextjournal/value :project, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 1 0 1], :nextjournal/value [], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :closing-paren ("}"), :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 1 1], :nextjournal/value [{:path [1 0 1 1 1 1 0], :nextjournal/value :pulumi-options, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 1 1 1], :nextjournal/value [], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :closing-paren ("}" "}"), :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}} {:path [1 0 1 1 2], :nextjournal/value [{:path [1 0 1 1 2 0], :nextjournal/value [{:path [1 0 1 1 2 0 0], :nextjournal/value :pulumi-options, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 0 1], :nextjournal/value [], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :closing-paren ("}"), :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1], :nextjournal/value [{:path [1 0 1 1 2 1 0], :nextjournal/value :robot-account, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 0 0], :nextjournal/value :level, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 0 1], :nextjournal/value "project", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 1 0], :nextjournal/value :name, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 1 1], :nextjournal/value "kube-harbor-robot", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 2], :nextjournal/value [{:path [1 0 1 1 2 1 1 2 0], :nextjournal/value :namespace, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 2 1], :nextjournal/value "harbor", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 3], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 0], :nextjournal/value :permissions, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 0], :nextjournal/value :access, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 0 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 0 0 0], :nextjournal/value :action, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 0 0 1], :nextjournal/value "pull", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 0 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 0 1 0], :nextjournal/value :resource, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 0 1 1], :nextjournal/value "repository", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 1 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 1 0 0], :nextjournal/value :action, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 1 0 1], :nextjournal/value "list", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 1 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 1 1 0], :nextjournal/value :resource, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 1 1 1], :nextjournal/value "repository", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}" "]"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-coll], :opening-paren "[", :page-size 20, :hash "5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 3 1 0 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 1 0], :nextjournal/value :kind, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 1 1], :nextjournal/value "project", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 3 1 0 2], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 2 0], :nextjournal/value :namespace, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 2 1], :nextjournal/value "harbor", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}" "]" "}" "}" "]"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-coll], :opening-paren "[", :page-size 20, :hash "5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-coll], :opening-paren "[", :page-size 20, :hash "5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f"}} {:path [1 0 1 2], :nextjournal/value [{:path [1 0 1 2 0], :nextjournal/value [{:path [1 0 1 2 0 0], :nextjournal/value :k8s:secret, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1], :nextjournal/value [{:path [1 0 1 2 0 1 0], :nextjournal/value [{:path [1 0 1 2 0 1 0 0], :nextjournal/value :metadata, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 0 1], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 0], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 0 0], :nextjournal/value :annotations, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 0 1 0 1], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 0 1 0], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 0 1 0 0], :nextjournal/value "replicator.v1.mittwald.de/replicate-to", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}} {:path [1 0 1 2 0 1 0 1 0 1 0 1], :nextjournal/value "*", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 2 0 1 0 1 1], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 1 0], :nextjournal/value :name, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 0 1 1 1], :nextjournal/value "harbor-creds-secrets", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 2 0 1 0 1 2], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 2 0], :nextjournal/value :namespace, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 0 1 2 1], :nextjournal/value "kube-system", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 2 0 1 1], :nextjournal/value [{:path [1 0 1 2 0 1 1 0], :nextjournal/value :stringData, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 1 1], :nextjournal/value [{:path [1 0 1 2 0 1 1 1 0], :nextjournal/value [{:path [1 0 1 2 0 1 1 1 0 0], :nextjournal/value ".dockerconfigjson", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}} {:path [1 0 1 2 0 1 1 1 0 1], :nextjournal/value "{\"auths\":{\"host\":{\"auth\":\"Og==\"}}}", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 2 0 1 2], :nextjournal/value [{:path [1 0 1 2 0 1 2 0], :nextjournal/value :type, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 2 1], :nextjournal/value "kubernetes.io/dockerconfigjson", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 2 1], :nextjournal/value [{:path [1 0 1 2 1 0], :nextjournal/value :pulumi-options, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 1 1], :nextjournal/value [], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :closing-paren ("}" "}" "]" "}"), :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-coll], :opening-paren "[", :page-size 20, :hash "5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}, :nextjournal/render-opts {:id "config-processor/anon-expr-5dqwp6CwNWUW4wm9kPFddjtStSbwL2-result-1"}}, :nextjournal/blob-id "5dsCGjrWwR4KR12hMJy4BZeQ4wG1v6"}, :nextjournal/render-opts {:id "config-processor/anon-expr-5dqwp6CwNWUW4wm9kPFddjtStSbwL2-result-1"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5dsXZQh4TD3sAeA79ECy4fhEdbB4p7"} [:p [:<> "However, what if we wanted to convert a value that is the result of an operation step."]]], :nextjournal/render-opts {:id "config-processor/markdown-5dsXZQh4TD3sAeA79ECy4fhEdbB4p7"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(defn run-simulation [stack initial-values]\n  (let [final-state\n        (reduce (fn [{:keys [ctx results]} item]\n                  (let [resolved-item (proc/resolve-template item ctx)\n\n                        ;; In a real engine, we'd deploy here.\n                        ;; In simulation, we decide what \"outputs\" this step created.\n                        ;; We look at the definition to see if we need to mock a return value.\n                        resource-outputs\n                        (cond\n                          (and (vector? item) (= (first item) :harbor))\n                          {:fullName (pulumi/output \"robot$test\")\n                           :secret   (pulumi/output \"secret-123\")}\n                          :else {})\n                        \n                        ;; In your config, you used :harbor:robot-account\n                        new-key (if (and (vector? item) (= (first item) :harbor))\n                                  :harbor:robot-account\n                                  nil)]\n\n                    {:results (conj results resolved-item)\n                     :ctx     (if new-key\n                                (assoc ctx new-key resource-outputs)\n                                ctx)}))\n                ;; Initial State\n                {:ctx initial-values :results []}\n                stack)]\n\n    (:results final-state)))", :nextjournal/render-opts {:loc {:line 137, :end-line 166, :column 1, :end-column 29}, :id "config-processor/run-simulation-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5dr9ZTKPiNTjHYHbZSpSiEibV93iTf"} [:p [:<> "and running that produces"]]], :nextjournal/render-opts {:id "config-processor/markdown-5dr9ZTKPiNTjHYHbZSpSiEibV93iTf"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(run-simulation test-config {:app-name \"harbor\"})", :nextjournal/render-opts {:loc {:line 169, :end-line 171, :column 1, :end-column 50}, :id "config-processor/anon-expr-5dtyaMceyqit2yVKk59SFyMgxEDQZZ-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value [{:path [1 0 0], :nextjournal/value :stack, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1], :nextjournal/value [{:path [1 0 1 0], :nextjournal/value [{:path [1 0 1 0 0], :nextjournal/value [{:path [1 0 1 0 0 0], :nextjournal/value :pulumi-options, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 0 0 1], :nextjournal/value [], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :closing-paren ("}"), :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 0 1], :nextjournal/value [{:path [1 0 1 0 1 0], :nextjournal/value :vault:retrieve, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 0 1 1], :nextjournal/value [{:path [1 0 1 0 1 1 0], :nextjournal/value [{:path [1 0 1 0 1 1 0 0], :nextjournal/value :app-name, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 0 1 1 0 1], :nextjournal/value "harbor", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 0 1 1 1], :nextjournal/value [{:path [1 0 1 0 1 1 1 0], :nextjournal/value :app-namespace, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 0 1 1 1 1], :nextjournal/value "harbor", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}} {:path [1 0 1 1], :nextjournal/value [{:path [1 0 1 1 0], :nextjournal/value :harbor, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 1], :nextjournal/value [{:path [1 0 1 1 1 0], :nextjournal/value [{:path [1 0 1 1 1 0 0], :nextjournal/value :project, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 1 0 1], :nextjournal/value [], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :closing-paren ("}"), :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 1 1], :nextjournal/value [{:path [1 0 1 1 1 1 0], :nextjournal/value :pulumi-options, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 1 1 1], :nextjournal/value [], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :closing-paren ("}" "}"), :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}} {:path [1 0 1 1 2], :nextjournal/value [{:path [1 0 1 1 2 0], :nextjournal/value [{:path [1 0 1 1 2 0 0], :nextjournal/value :pulumi-options, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 0 1], :nextjournal/value [], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :closing-paren ("}"), :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1], :nextjournal/value [{:path [1 0 1 1 2 1 0], :nextjournal/value :robot-account, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 0 0], :nextjournal/value :level, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 0 1], :nextjournal/value "project", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 1 0], :nextjournal/value :name, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 1 1], :nextjournal/value "kube-harbor-robot", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 2], :nextjournal/value [{:path [1 0 1 1 2 1 1 2 0], :nextjournal/value :namespace, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 2 1], :nextjournal/value "harbor", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 3], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 0], :nextjournal/value :permissions, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 0], :nextjournal/value :access, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 0 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 0 0 0], :nextjournal/value :action, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 0 0 1], :nextjournal/value "pull", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 0 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 0 1 0], :nextjournal/value :resource, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 0 1 1], :nextjournal/value "repository", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 1 0], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 1 0 0], :nextjournal/value :action, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 1 0 1], :nextjournal/value "list", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 1 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 0 1 1 1 0], :nextjournal/value :resource, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 0 1 1 1 1], :nextjournal/value "repository", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}" "]"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-coll], :opening-paren "[", :page-size 20, :hash "5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 3 1 0 1], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 1 0], :nextjournal/value :kind, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 1 1], :nextjournal/value "project", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 1 2 1 1 3 1 0 2], :nextjournal/value [{:path [1 0 1 1 2 1 1 3 1 0 2 0], :nextjournal/value :namespace, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 1 2 1 1 3 1 0 2 1], :nextjournal/value "harbor", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}" "]" "}" "}" "]"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-coll], :opening-paren "[", :page-size 20, :hash "5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-coll], :opening-paren "[", :page-size 20, :hash "5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f"}} {:path [1 0 1 2], :nextjournal/value [{:path [1 0 1 2 0], :nextjournal/value [{:path [1 0 1 2 0 0], :nextjournal/value :k8s:secret, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1], :nextjournal/value [{:path [1 0 1 2 0 1 0], :nextjournal/value [{:path [1 0 1 2 0 1 0 0], :nextjournal/value :metadata, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 0 1], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 0], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 0 0], :nextjournal/value :annotations, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 0 1 0 1], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 0 1 0], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 0 1 0 0], :nextjournal/value "replicator.v1.mittwald.de/replicate-to", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}} {:path [1 0 1 2 0 1 0 1 0 1 0 1], :nextjournal/value "*", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 2 0 1 0 1 1], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 1 0], :nextjournal/value :name, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 0 1 1 1], :nextjournal/value "harbor-creds-secrets", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 2 0 1 0 1 2], :nextjournal/value [{:path [1 0 1 2 0 1 0 1 2 0], :nextjournal/value :namespace, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 0 1 2 1], :nextjournal/value "kube-system", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 2 0 1 1], :nextjournal/value [{:path [1 0 1 2 0 1 1 0], :nextjournal/value :stringData, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 1 1], :nextjournal/value [{:path [1 0 1 2 0 1 1 1 0], :nextjournal/value [{:path [1 0 1 2 0 1 1 1 0 0], :nextjournal/value ".dockerconfigjson", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\""), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}} {:path [1 0 1 2 0 1 1 1 0 1], :nextjournal/value "{\"auths\":{\"host\":{\"auth\":\"Og==\"}}}", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 2 0 1 2], :nextjournal/value [{:path [1 0 1 2 0 1 2 0], :nextjournal/value :type, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 0 1 2 1], :nextjournal/value "kubernetes.io/dockerconfigjson", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-quoted-string], :opening-paren "\"", :closing-paren ("\"" "}"), :page-size 80, :hash "5dsDiKZaSjZpuyav79P69dRKiDtE2s"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [1 0 1 2 1], :nextjournal/value [{:path [1 0 1 2 1 0], :nextjournal/value :pulumi-options, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [1 0 1 2 1 1], :nextjournal/value [], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :closing-paren ("}" "}" "]" "]"), :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-coll], :opening-paren "[", :page-size 20, :hash "5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-coll], :opening-paren "[", :page-size 20, :hash "5dsD1KJESfc8Dy8gPeGQfZCX2ayE8f"}, :nextjournal/render-opts {:auto-expand-results? true, :id "config-processor/anon-expr-5dtyaMceyqit2yVKk59SFyMgxEDQZZ-result-1"}}, :nextjournal/blob-id "5dsnf8k2NyptYQ6Ca2eSVK5iHVvB8Y"}, :nextjournal/render-opts {:auto-expand-results? true, :id "config-processor/anon-expr-5dtyaMceyqit2yVKk59SFyMgxEDQZZ-result-1"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5dtAy1noXcj5oDGPLugzC5YNE7bDSW"} [:p [:<> "With that we can be conclusive that at least in our simulation (using Clojure)"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "Ensuring that runtime resolution occurs as expected with the deeply nested potential of"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "Pulumi outputs is essential to making sure this is a smooth experience for the developer."]] ["h3" {:id "testing"} [:<> "Testing"]] [:p [:<> "Something interesting we could do is add a unit test against the result of the simulation."]] [:p [:<> "So after the runtime evaluation this is what the harbor config's internal state would look like:"]]], :nextjournal/render-opts {:id "config-processor/markdown-5dtAy1noXcj5oDGPLugzC5YNE7bDSW"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(def expected-harbor-state\n  [[:stack [{:vault:retrieve {:app-name \"harbor\", :app-namespace \"harbor\"}, :pulumi-options {}}\n            [:harbor\n             {:project {}, :pulumi-options {}}\n             {:robot-account {:name \"kube-harbor-robot\",\n                              :namespace \"harbor\",\n                              :level \"project\",\n                              :permissions [{:kind \"project\", \n                                             :namespace \"harbor\", \n                                             :access [{:action \"pull\", :resource \"repository\"} \n                                                      {:action \"list\", :resource \"repository\"}]}]}, \n              :pulumi-options {}}]\n            {:k8s:secret {:metadata {:name \"harbor-creds-secrets\", \n                                     :namespace \"kube-system\", \n                                     :annotations {\"replicator.v1.mittwald.de/replicate-to\" \"*\"}}, \n                          :type \"kubernetes.io/dockerconfigjson\", \n                          :stringData {\".dockerconfigjson\" \"{\\\"auths\\\":{\\\"host\\\":{\\\"auth\\\":\\\"Og==\\\"}}}\"}}, \n             :pulumi-options {}}]]])", :nextjournal/render-opts {:loc {:line 182, :end-line 200, :column 1, :end-column 37}, :id "config-processor/expected-harbor-state-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5du3cq9wGXSAPePaVwSdaesevxsifT"} [:p [:<> "We can very simply run now an integrity test as Pulumi will treat this in a very simple manner. The key to all of"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "this, of course, is the evaluation behind the scenes to make writing these extremely fluid and organized."]]], :nextjournal/render-opts {:id "config-processor/markdown-5du3cq9wGXSAPePaVwSdaesevxsifT"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(deftest harbor-integrity-test\n  (let [actual (run-simulation test-config {:app-name \"harbor\"})\n        [only-in-expected only-in-actual common] (diff expected-harbor-state actual)]\n    (is (and (nil? only-in-expected)\n             (nil? only-in-actual))\n        (str \"Config mismatch! Diff: \" {:missing only-in-expected\n                                                :extra only-in-actual}))))", :nextjournal/render-opts {:loc {:line 205, :end-line 212, :column 1, :end-column 75}, :id "config-processor/harbor-integrity-test-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value {:nextjournal/presented {:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value [{:path [0 0 0], :nextjournal/value :error, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [0 0 1], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [0 1], :nextjournal/value [{:path [0 1 0], :nextjournal/value :fail, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [0 1 1], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [0 2], :nextjournal/value [{:path [0 2 0], :nextjournal/value :pass, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [0 2 1], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [0 3], :nextjournal/value [{:path [0 3 0], :nextjournal/value :test, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [0 3 1], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}} {:path [0 4], :nextjournal/value [{:path [0 4 0], :nextjournal/value :type, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}} {:path [0 4 1], :nextjournal/value :summary, :nextjournal/viewer {:name nextjournal.clerk.viewer/keyword-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] [:span.cmt-atom.inspected-value (str x)])], :hash "5dsp5Uy2KDqwuALVVk33HXMZdpXGBq"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-entry-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose " ")) xs))], :page-size 2, :hash "5dsRuzZximgoCTqHkts5WgKf7zc8xg"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/map-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-map], :opening-paren "{", :closing-paren ("}"), :page-size 10, :hash "5drc3ac5ux7kS4h2vozdxwsrKDqSmn"}, :nextjournal/render-opts {:id "config-processor/anon-expr-5dtnGPfWLtQHpDou8uDEQEDM4ykztq-result"}}, :nextjournal/blob-id "5dqtQiYtMpf4XzCPpWra83D75RJD2D"}, :nextjournal/render-opts {:id "config-processor/anon-expr-5dtnGPfWLtQHpDou8uDEQEDM4ykztq-result"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "config-processor/markdown-5dsxTiMYyVDwzMBGZ3AXKcmu5UpvwB"} [:p [:<> "Now this shows 1 passed test, so we know our config processor works exactly as we want."]]], :nextjournal/render-opts {:id "config-processor/markdown-5dsxTiMYyVDwzMBGZ3AXKcmu5UpvwB"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-notebook], :hash "5duAFDxE4sCnRX71Wo6zeCpC9C3djE"}, :katex? nil}